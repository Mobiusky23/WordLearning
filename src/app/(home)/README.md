# 在线单词学习系统 - 首页开发文档

## 目录结构
src/app/(home)/
├── README.md # 开发文档
├── page.tsx # 首页页面
└── components/ # 组件目录
├── SearchBox.tsx # 搜索框组件
├── SearchResult.tsx # 查询结果组件
└── AuthButtons.tsx # 登录注册按钮组件 


## 功能需求

根据产品需求文档,首页需要实现:
1. 搜索框
   - 支持英译中、中译英查询
   - 显示基本释义
2. 查询结果显示
   - 清晰展示单词释义
   - 适配移动端显示
3. 登录/注册入口
   - 未登录状态显示登录/注册按钮
   - 已登录状态显示用户信息

## 技术实现

- 使用 Next.js 15.1.0 (App Router)
- React 19 + TypeScript
- UI 框架: shadcn/ui + Tailwind CSS
- 字体: Geist Sans

## 开发规范

1. 组件开发
   - 每个组件单独成文件
   - 使用 TypeScript 类型声明
   - 遵循 React 组件最佳实践

2. 样式开发
   - 优先使用 Tailwind CSS 类
   - 支持响应式设计
   - 遵循设计规范

3. 代码规范
   - 使用 ESLint 进行代码检查
   - 遵循 TypeScript 严格模式
   - 保持代码整洁和可维护性

## 技术设计要点

### 1. 页面布局与交互设计
- 布局结构
  * 顶部导航栏
    - 左侧: Logo (链接到首页)
    - 右侧: 认证按钮组 (登录/注册)
    - 固定在顶部，不随页面滚动
  * 中部搜索区域
    - 大尺寸搜索框居中显示
    - 语言切换按钮 (中/英)
    - 搜索按钮或回车触发
  * 底部结果区域
    - 卡片式布局展示结果
    - 支持展开/收起详细信息
    - 滚动加载更多结果

- 响应式设计
  * 移动端 (< 640px)
    - 垂直堆叠布局
    - 全宽搜索框
    - 简化导航栏
  * 平板 (640px - 1024px)
    - 搜索框最大宽度 80%
    - 结果区域双列布局
  * 桌面端 (> 1024px)
    - 搜索框最大宽度 60%
    - 结果区域三列布局
    - 显示更多详细信息

- 交互体验
  * 输入响应
    - 实时输入建议 (300ms 防抖)
    - 输入时显示清除按钮
    - 支持历史记录快速选择
  * 状态反馈
    - 搜索中显示加载动画
    - 结果更新时平滑过渡
    - 错误状态醒目提示
  * 动画效果
    - 页面元素淡入淡出
    - 结果卡片滑入效果
    - 展开/收起动画

### 2. 数据流设计
- 查询流程
  * 输入处理
    - 300ms 防抖延迟
    - 输入验证和清理
    - 空值和特殊字符处理
  * 缓存策略
    - localStorage 存储最近查询
    - 内存缓存热门结果
    - 缓存有效期 30 分钟
  * 错误处理
    - 网络超时自动重试 (最多3次)
    - 服务器错误友好提示
    - 降级方案支持

- 状态管理
  * 查询历史
    - 本地存储最近 50 条记录
    - 按时间倒序排列
    - 支持删除和清空
  * 用户状态
    - NextAuth.js 会话管理
    - 登录状态持久化
    - 权限级别控制
  * 结果缓存
    - React Query 数据缓存
    - 预加载常用数据
    - 定期清理过期缓存

### 3. 用户体验优化
- 加载状态
  * 骨架屏
    - 搜索结果占位图
    - 渐变动画效果
    - 保持页面布局稳定
  * 进度反馈
    - 顶部进度条
    - 搜索按钮加载状态
    - 结果区域加载提示
  * 降级处理
    - 网络慢时显示提示
    - 部分加载时显示已有内容
    - 保留基础功能可用

- 错误处理
  * 错误提示
    - 醒目但不打扰的提示框
    - 错误原因简明说明
    - 建议解决方案
  * 异常处理
    - 网络错误自动重试
    - 服务器错误显示状态
    - 输入错误即时提示
  * 输入验证
    - 实时输入检查
    - 特殊字符过滤
    - 长度限制提示

- 辅助功能
  * 输入建议
    - 实时联想词列表
    - 历史记录快速选择
    - 热门词汇推荐
  * 快捷操作
    - 键盘快捷键支持
    - 右键菜单功能
    - 手势操作支持
  * 使用帮助
    - 功能引导提示
    - 快捷键说明
    - 常见问题解答

### 4. 性能优化策略
- 代码分割
  * 组件加载
    - 路由级别代码分割
    - 组件懒加载配置
    - 预加载关键组件
  * 依赖处理
    - 第三方库按需引入
    - 公共依赖抽离
    - Tree-shaking 优化
  * 动态导入
    - 非关键组件延迟加载
    - 条件渲染时按需加载
    - 预加载下一步可能需要的组件

- 资源优化
  * 图片处理
    - 响应式图片加载
    - WebP 格式支持
    - 图片懒加载
  * 字体加载
    - 使用 next/font 优化
    - 关键字符优先加载
    - 字体子集化
  * 静态资源
    - CDN 分发
    - 资源压缩
    - 缓存策略配置

- 渲染优化
  * 列表处理
    - 虚拟滚动实现
    - 分页加载
    - DOM 节点回收
  * 更新控制
    - useMemo 缓存计算结果
    - useCallback 缓存函数
    - React.memo 避免重渲染
  * 状态管理
    - 合理的状态分割
    - 避免不必要的更新
    - 批量更新处理

### 5. 安全性考虑
- 用户认证
  * NextAuth.js
    - OAuth 提供商配置
    - JWT 令牌管理
    - 会话持久化
  * 权限控制
    - 基于角色的访问控制
    - API 路由保护
    - 敏感操作验证
  * 会话管理
    - 安全的会话存储
    - 会话超时处理
    - 多设备登录控制

- 数据安全
  * 输入处理
    - XSS 防护
    - SQL 注入防护
    - 特殊字符转义
  * 数据传输
    - HTTPS 加密
    - 敏感数据加密
    - 数据完整性校验
  * 存储安全
    - 密码哈希存储
    - 敏感信息加密
    - 数据备份策略

- API 安全
  * 访问控制
    - 速率限制实现
    - IP 黑名单
    - 请求来源验证
  * 数据验证
    - 请求参数验证
    - 响应数据过滤
    - 类型安全检查
  * 错误处理
    - 安全的错误消息
    - 日志记录
    - 异常监控

### 6. 可访问性(A11Y)
- 语义化结构
  * HTML5 语义化标签
  * 正确的标题层级
  * 适当的 ARIA 角色

- 键盘操作
  * 焦点管理
  * 快捷键支持
  * Tab 键导航顺序

- 屏幕阅读
  * 替代文本
  * 正确的朗读顺序
  * 状态变化通知

- 视觉辅助
  * 足够的颜色对比度
  * 可调整的字体大小
  * 焦点状态清晰可见

## 待办事项

- [ ] 创建基础页面结构
- [ ] 实现搜索框组件
- [ ] 实现查询结果显示
- [ ] 添加登录/注册入口
- [ ] 编写组件测试
- [ ] 优化页面性能